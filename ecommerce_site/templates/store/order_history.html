{% extends 'layouts/dashboard_base.html' %}

{% block title %}My Orders{% endblock %}
{% block page_title %}Order History{% endblock %}

{% block content %}
<div class="animate-fade">
    {% if orders %}
    <div class="card">
        <table style="width: 100%; border-collapse: collapse;">
            <thead>
                <tr style="border-bottom: 1px solid var(--border); text-align: left;">
                    <th style="padding: 1rem; color: var(--text-muted); font-weight: 500;">Order ID</th>
                    <th style="padding: 1rem; color: var(--text-muted); font-weight: 500;">Date</th>
                    <th style="padding: 1rem; color: var(--text-muted); font-weight: 500;">Total</th>
                    <th style="padding: 1rem; color: var(--text-muted); font-weight: 500;">Status</th>
                    <th style="padding: 1rem; color: var(--text-muted); font-weight: 500;">Items</th>
                </tr>
            </thead>
            <tbody>
                {% for order in orders %}
                <tr style="border-bottom: 1px solid var(--border);">
                    <td style="padding: 1rem; font-weight: 600;">#{{ order.id }}</td>
                    <td style="padding: 1rem;">{{ order.created_at|date:"M d, Y" }}</td>
                    <td style="padding: 1rem;">â‚¹{{ order.get_total_cost }}</td>
                    <td style="padding: 1rem;">
                        <span
                            style="background: rgba(16, 185, 129, 0.1); color: var(--success); padding: 0.25rem 0.5rem; border-radius: 1rem; font-size: 0.85rem;">
                            {% if order.paid %}Paid{% else %}Pending{% endif %}
                        </span>
                    </td>
                    <td style="padding: 1rem; font-size: 0.9rem; color: var(--text-muted);">
                        {% for item in order.items.all %}
                        {{ item.product.name }} (x{{ item.quantity }}){% if not forloop.last %}, {% endif %}
                        {% endfor %}
                    </td>
                </tr>
                {% endfor %}
            </tbody>
        </table>
    </div>
    {% else %}
    <div class="card" style="text-align: center; padding: 4rem;">
        <i class="ri-file-list-3-line"
            style="font-size: 4rem; color: var(--text-muted); opacity: 0.5; margin-bottom: 1.5rem;"></i>
        <h2>No orders found</h2>
        <p style="color: var(--text-muted); max-width: 400px; margin: 0.5rem auto 2rem;">You haven't placed any orders
            yet.</p>
        <a href="{% url 'product_list' %}" class="btn btn-primary">
            Start Shopping
        </a>
    </div>
    {% endif %}
</div>
{% endblock %}